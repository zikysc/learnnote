<!--
title: é¦–é¡µ
description: 
published: true
date: 2025-08-14T09:12:28.131Z
tags: 
editor: code
dateCreated: 2025-08-14T07:18:45.045Z
-->

<!-- å¼•å…¥ Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<div id="dashboard" style="font-family:'Segoe UI', sans-serif; padding:20px; background:#f5f7fa;">

  <h1 style="text-align:center; color:#2c3e50;">ä¼ä¸šå†…éƒ¨çŸ¥è¯†åº“ä»ªè¡¨ç›˜</h1>

  <!-- ç»Ÿè®¡æ¨¡å— -->
  <div style="display:flex; flex-wrap:wrap; gap:20px; justify-content:center; margin-top:30px;">
    <div style="flex:1 1 150px; background:white; text-align:center; padding:20px; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.1);">
      <h2 id="doc-count" style="color:#3498db; font-size:28px;">0</h2>
      <p>æ–‡æ¡£</p>
    </div>
    <div style="flex:1 1 150px; background:white; text-align:center; padding:20px; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.1);">
      <h2 id="project-count" style="color:#2ecc71; font-size:28px;">0</h2>
      <p>é¡¹ç›®</p>
    </div>
    <div style="flex:1 1 150px; background:white; text-align:center; padding:20px; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.1);">
      <h2 id="team-count" style="color:#e67e22; font-size:28px;">0</h2>
      <p>å›¢é˜Ÿæˆå‘˜</p>
    </div>
  </div>

  <!-- æœ€è¿‘æ–‡æ¡£æ›´æ–° -->
  <h2 style="margin-top:40px; border-bottom:2px solid #3498db; display:inline-block; padding-bottom:5px;">ğŸ“ æœ€è¿‘æ›´æ–°æ–‡æ¡£</h2>
  <ul id="recent-docs" style="list-style:none; padding:0; margin-top:15px;"></ul>

  <!-- é¡¹ç›®è¿›åº¦æ¡ -->
  <h2 style="margin-top:40px; border-bottom:2px solid #3498db; display:inline-block; padding-bottom:5px;">ğŸ“Š é¡¹ç›®è¿›åº¦</h2>
  <div id="project-progress" style="margin-top:15px;"></div>
</div>

<script>
// æ›¿æ¢æˆä½ çš„ Wiki.js API URL å’Œ Key
const API_BASE = "https://your-wiki.com/api";
const API_KEY = "YOUR_API_KEY_HERE";

// fetch helper
async function fetchAPI(endpoint) {
  const res = await fetch(`${API_BASE}${endpoint}`, {
    headers: { Authorization: `Bearer ${API_KEY}` }
  });
  return res.json();
}

// æ›´æ–°ç»Ÿè®¡æ•°å­—
async function updateStats() {
  const pages = await fetchAPI("/pages");
  const users = await fetchAPI("/users");
  
  const docCount = pages.length;
  const projectPages = pages.filter(p => p.category && p.category.toLowerCase().includes("project"));
  const projectCount = projectPages.length;
  const teamCount = users.length;

  document.getElementById("doc-count").textContent = docCount;
  document.getElementById("project-count").textContent = projectCount;
  document.getElementById("team-count").textContent = teamCount;

  // æœ€è¿‘æ–‡æ¡£
  const recent = pages.sort((a,b)=>new Date(b.updatedAt)-new Date(a.updatedAt)).slice(0,5);
  const recentList = document.getElementById("recent-docs");
  recentList.innerHTML = "";
  recent.forEach(doc=>{
    const li = document.createElement("li");
    li.style.background = "white";
    li.style.padding = "12px 20px";
    li.style.marginBottom = "10px";
    li.style.borderRadius = "6px";
    li.style.boxShadow = "0 1px 5px rgba(0,0,0,0.05)";
    li.style.display = "flex";
    li.style.justifyContent = "space-between";
    li.innerHTML = `<span><i class="fas fa-file-alt"></i> ${doc.title}</span><span style="color:#7f8c8d;">${new Date(doc.updatedAt).toLocaleDateString()}</span>`;
    recentList.appendChild(li);
  });

  // é¡¹ç›®è¿›åº¦æ¡
  const progressDiv = document.getElementById("project-progress");
  progressDiv.innerHTML = "";
  projectPages.forEach(p=>{
    const wrapper = document.createElement("div");
    wrapper.style.background="#ecf0f1";
    wrapper.style.borderRadius="8px";
    wrapper.style.overflow="hidden";
    wrapper.style.marginBottom="10px";

    const bar = document.createElement("div");
    const percent = p.progress || Math.floor(Math.random()*100); // å¦‚æœä½ æœ‰é¡¹ç›®è¿›åº¦å­—æ®µï¼Œç”¨ p.progress æ›¿æ¢
    bar.style.width = percent+"%";
    bar.style.background="#3498db";
    bar.style.padding="6px 0";
    bar.style.color="white";
    bar.style.textAlign="center";
    bar.style.borderRadius="8px";
    bar.textContent = `${p.title} ${percent}%`;
    wrapper.appendChild(bar);
    progressDiv.appendChild(wrapper);
  });
}

// åˆå§‹åŒ–
updateStats();

// å¯é€‰ï¼šæ¯ 5 åˆ†é’Ÿåˆ·æ–°ä¸€æ¬¡
setInterval(updateStats, 5*60*1000);
</script>